{% extends 'tureview/base.html' %}
{% load static %}
{% load costum_filters %}
{% block title %} Course {{ course.id }} {% endblock %}
{% csrf_token %}
{% block content %}

<!-- section voor laag 1-->
<section class="page-section background">
  <!-- section voor laag 2-->
    <div class="container.course">
      <div class="row.course">
              <div class="coursedescription">
                <div class="section-heading mb-4">
                    <div>
                      <span class="tbig">{{course.id}} {{ course.name }}</span>
                      <span class="tbig" style="float: right;"><span class="tsmall">average rating:</span> {{ course.getAverage }} </span>
                    </div>
                    <div>
                      <span class="faculty"> {{ course.get_faculty_display }}</span>
                      </div>
                    <div>
                      {{course.descriptionLong}}
                    </div>
                  </div>
            </div>
            <div class="aligncenter">
              <a class="btn btn-primary btn-xl center" href="review" style=":margin-bottom:0 !important;">Write your own review</a>
          </div>
        </div>
    </div>

    <section style="width:100%; padding:5px;">
      <!-- accordion voor laag 3.1-->
      {% for review in reviews %}
        <div class="whitebox">
          <div class="cta-inner rounded">
            <div class="section-heading mb-4">
              <table style="border-collapse: collapse; width: 100%;">
                <colgroup>
                   <col span="1" style="width: 15%;">
                   <col span="1" style="width: 70%;">
                   <col span="1" style="width: 15%;">
                </colgroup>
                <tr>
                  <th class="tbig" colspan="2">{{ review.reviewShort }}</th>
                  <th class="tbig" style="text-align: right;">{{review.ratingOverall}}</th>
                </tr>
                <tr>
                  <td class="tsmall"><a href="{% url 'userprofile' username=review.student %}">{{ review.student.user.username }}</a> </td>
                  <td class="tsmall" style="text-align: right; overflow: visible;" colspan="2">{{ review.date }}</td>
                </tr>
              </table>
              <div>
                <div class="tsmall" id="panel" style="display:none;">started this course as a {{ review.timeslot.year|yearStudent:review.student.startYear }} year student <br> from: {{ review.student.get_major_display }}</br></br>
                  <p class="italic">{{ review.reviewLong }}</p>
                  <p>
                    <b>Informative: <span id="ratingInf">{{ review.ratingInf }}<span></b><br>
                    <b>Time consuming: </b><span id="ratingTime">{{ review.ratingTime }}</span><br>
                    <b>Relevant: </b><span id="ratingRele">{{ review.ratingRele }}</span><br>
                    <b>Difficult: </b><span id="ratingDiff">{{ review.ratingDiff }}</span><br>
                    <input id="ratingInf-value" type="hidden" value="{{ review.ratingInf }}" ></input>
                    <input id="ratingTime-value" type="hidden" value="{{ review.ratingTime }}" ></input>
                    <input id="ratingRele-value" type="hidden" value="{{ review.ratingRele }}" ></input>
                    <input id="ratingDiff-value" type="hidden" value="{{ review.ratingDiff }}" ></input>
                  </p>
                </div>
                <div id="flip">

                  <div class="aligncenter">
                    <button class="btn btn-primary showMore">
                      <i class="fa fa-chevron-down" aria-hidden="true"></i>
                      Show more
                    </button>
                    <button class="btn btn-primary showLess" style="display: none;">
                      <i class="fa fa-chevron-up" aria-hidden="true"></i>
                      Show less
                    </button>
                  </div>
                </div>
              </div>
              <div class="aligncenter">
                <span class="tsmall" id="thumbsUpCount"> {{review.thumbsUp.count}} </span>
                {% if not request.user.is_authenticated %}<a href="{% url 'login' %}">{% endif %}
                <button class="btn btn-primary thumbsUp" id="thumbsUp">
                  {% if review.up == True %}
                  <i class="fa fa-thumbs-up active" style=aria-hidden="true"></i>
                  <i class="fa fa-thumbs-o-up inactive" style="display: none;" style=aria-hidden="true"></i>
                  {% else %}
                  <i class="fa fa-thumbs-up active" style="display: none;" style=aria-hidden="true"></i>
                  <i class="fa fa-thumbs-o-up inactive" style=aria-hidden="true"></i>
                  {% endif %}
                </button>
                {% if not request.user.is_authenticated %}</a>{% endif %}
                <span class="tsmall" id="thumbsDownCount"> {{review.thumbsDown.count}} </span>
                {% if not request.user.is_authenticated %}<a href="{% url 'login' %}">{% endif %}
                <button class="btn btn-primary thumbsDown" id="thumbsDown">
                  {% if review.down == True %}
                  <i class="fa fa-thumbs-down active" style=aria-hidden="true"></i>
                  <i class="fa fa-thumbs-o-down inactive" style="display: none;" style=aria-hidden="true"></i>
                  {% else %}
                  <i class="fa fa-thumbs-down active" style="display: none;" style=aria-hidden="true"></i>
                  <i class="fa fa-thumbs-o-down inactive" style=aria-hidden="true"></i>
                  {% endif %}
                </button>
                {% if not request.user.is_authenticated %}</a>{% endif %}
                <input id="review-pk" type="hidden" value="{{ review.pk }}" ></input>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </section>
</section>
<script src="{% static 'javascript/ajax.js' %}" defer></script>
<script src="{% static 'javascript/course.js' %}" defer></script>
{% endblock %}
